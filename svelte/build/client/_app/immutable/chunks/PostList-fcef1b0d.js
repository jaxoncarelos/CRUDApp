import{S as J,i as R,s as V,k as m,q as g,a as E,l as v,m as b,r as T,h as p,c as S,n as y,b as k,D as d,u as C,B as I,J as H,K,g as X,t as w,d as z,f as U,e as D,N as Y,w as F,x as G,y as Q,z as W,O as Z}from"./index-020402b1.js";function M(c){let e,l,t,o,r,a,n;return{c(){e=m("button"),l=g("X"),t=E(),o=m("button"),r=g("🔧"),this.h()},l(s){e=v(s,"BUTTON",{class:!0});var i=b(e);l=T(i,"X"),i.forEach(p),t=S(s),o=v(s,"BUTTON",{class:!0});var _=b(o);r=T(_,"🔧"),_.forEach(p),this.h()},h(){y(e,"class","svelte-asfhp9"),y(o,"class","editButton svelte-asfhp9")},m(s,i){k(s,e,i),d(e,l),k(s,t,i),k(s,o,i),d(o,r),a||(n=[H(e,"click",c[1]),H(o,"click",c[2])],a=!0)},p:I,d(s){s&&p(e),s&&p(t),s&&p(o),a=!1,K(n)}}}function x(c){let e,l,t=c[0].postId+"",o,r,a,n=c[0].username+"",s,i,_,P=c[0].content+"",$,O,B=c[0].username==localStorage.getItem("CRUDAppUsername"),u=B&&M(c);return{c(){e=m("div"),l=m("p"),o=g(t),r=E(),a=m("h1"),s=g(n),i=E(),_=m("p"),$=g(P),O=E(),u&&u.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var f=b(e);l=v(f,"P",{class:!0});var L=b(l);o=T(L,t),L.forEach(p),r=S(f),a=v(f,"H1",{class:!0});var N=b(a);s=T(N,n),N.forEach(p),i=S(f),_=v(f,"P",{class:!0});var q=b(_);$=T(q,P),q.forEach(p),O=S(f),u&&u.l(f),f.forEach(p),this.h()},h(){y(l,"class","id svelte-asfhp9"),y(a,"class","username svelte-asfhp9"),y(_,"class","content svelte-asfhp9"),y(e,"class","post svelte-asfhp9")},m(h,f){k(h,e,f),d(e,l),d(l,o),d(e,r),d(e,a),d(a,s),d(e,i),d(e,_),d(_,$),d(e,O),u&&u.m(e,null)},p(h,[f]){f&1&&t!==(t=h[0].postId+"")&&C(o,t),f&1&&n!==(n=h[0].username+"")&&C(s,n),f&1&&P!==(P=h[0].content+"")&&C($,P),f&1&&(B=h[0].username==localStorage.getItem("CRUDAppUsername")),B?u?u.p(h,f):(u=M(h),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:I,o:I,d(h){h&&p(e),u&&u.d()}}}function ee(c,e,l){let{post:t}=e;function o(){if(t.username!=localStorage.getItem("CRUDAppUsername")){alert("You can't delete this post");return}fetch("/api/deletePost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t.postId})}),window.location.reload()}function r(){let a=document.querySelector(".content");a.contentEditable=!0,a.focus();let n=document.querySelector(".editButton");n.innerHTML="✔️",n.onclick=async()=>{a.contentEditable=!1,n.innerHTML="🔧",await(await fetch("/api/editPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t.postId,content:a.innerHTML})})).json()&&window.location.reload()}}return c.$$set=a=>{"post"in a&&l(0,t=a.post)},[t,o,r]}class te extends J{constructor(e){super(),R(this,e,ee,x,V,{post:0})}}function j(c,e,l){const t=c.slice();return t[1]=e[l],t}function se(c){let e=[],l=new Map,t,o,r=c[0];const a=n=>n[1].postId;for(let n=0;n<r.length;n+=1){let s=j(c,r,n),i=a(s);l.set(i,e[n]=A(i,s))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=D()},l(n){for(let s=0;s<e.length;s+=1)e[s].l(n);t=D()},m(n,s){for(let i=0;i<e.length;i+=1)e[i].m(n,s);k(n,t,s),o=!0},p(n,s){s&1&&(r=n[0],X(),e=Y(e,s,a,1,n,r,l,t.parentNode,Z,A,t,j),z())},i(n){if(!o){for(let s=0;s<r.length;s+=1)U(e[s]);o=!0}},o(n){for(let s=0;s<e.length;s+=1)w(e[s]);o=!1},d(n){for(let s=0;s<e.length;s+=1)e[s].d(n);n&&p(t)}}}function le(c){let e,l;return{c(){e=m("p"),l=g("There are no posts yet")},l(t){e=v(t,"P",{});var o=b(e);l=T(o,"There are no posts yet"),o.forEach(p)},m(t,o){k(t,e,o),d(e,l)},p:I,i:I,o:I,d(t){t&&p(e)}}}function A(c,e){let l,t,o;return t=new te({props:{post:e[1]}}),{key:c,first:null,c(){l=D(),F(t.$$.fragment),this.h()},l(r){l=D(),G(t.$$.fragment,r),this.h()},h(){this.first=l},m(r,a){k(r,l,a),Q(t,r,a),o=!0},p(r,a){e=r;const n={};a&1&&(n.post=e[1]),t.$set(n)},i(r){o||(U(t.$$.fragment,r),o=!0)},o(r){w(t.$$.fragment,r),o=!1},d(r){r&&p(l),W(t,r)}}}function ne(c){let e,l,t,o;const r=[le,se],a=[];function n(s,i){return s[0]?1:0}return l=n(c),t=a[l]=r[l](c),{c(){e=m("div"),t.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var i=b(e);t.l(i),i.forEach(p),this.h()},h(){y(e,"class","postList svelte-nmi1u2")},m(s,i){k(s,e,i),a[l].m(e,null),o=!0},p(s,[i]){let _=l;l=n(s),l===_?a[l].p(s,i):(X(),w(a[_],1,1,()=>{a[_]=null}),z(),t=a[l],t?t.p(s,i):(t=a[l]=r[l](s),t.c()),U(t,1),t.m(e,null))},i(s){o||(U(t),o=!0)},o(s){w(t),o=!1},d(s){s&&p(e),a[l].d()}}}function oe(c,e,l){let{posts:t}=e;return c.$$set=o=>{"posts"in o&&l(0,t=o.posts)},[t]}class re extends J{constructor(e){super(),R(this,e,oe,ne,V,{posts:0})}}export{re as P};
