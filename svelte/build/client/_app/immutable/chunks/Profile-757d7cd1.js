import{S,i as q,s as M,k as v,a as P,q as A,l as g,m as y,c as E,r as C,h as m,P as R,n as b,b as I,D as d,u as T,B as a,e as U,f as $,t as w,L as N,M as V,g as z,d as G,w as j,x as B,y as F,J as H,z as O}from"./index-020402b1.js";import{P as J}from"./PostList-36cae3a1.js";function K(s){let e,l,t,n,o,r,_;return{c(){e=v("div"),l=v("div"),t=v("img"),o=P(),r=v("div"),_=A(s[0]),this.h()},l(c){e=g(c,"DIV",{class:!0});var u=y(e);l=g(u,"DIV",{class:!0});var p=y(l);t=g(p,"IMG",{src:!0,height:!0,alt:!0}),o=E(p),r=g(p,"DIV",{class:!0});var i=y(r);_=C(i,s[0]),i.forEach(m),p.forEach(m),u.forEach(m),this.h()},h(){R(t.src,n="blank.webp")||b(t,"src",n),b(t,"height","300"),b(t,"alt","blank"),b(r,"class","name svelte-utgt71"),b(l,"class","sub svelte-utgt71"),b(e,"class","wrapper svelte-utgt71")},m(c,u){I(c,e,u),d(e,l),d(l,t),d(l,o),d(l,r),d(r,_)},p(c,[u]){u&1&&T(_,c[0])},i:a,o:a,d(c){c&&m(e)}}}function Q(s,e,l){let{username:t}=e;return s.$$set=n=>{"username"in n&&l(0,t=n.username)},[t]}class W extends S{constructor(e){super(),q(this,e,Q,K,M,{username:0})}}function X(s){let e,l,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:se,then:Z,catch:Y,value:1,blocks:[,,,]};return N(l=D(s[0]),n),{c(){e=U(),n.block.c()},l(o){e=U(),n.block.l(o)},m(o,r){I(o,e,r),n.block.m(o,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(o,r){s=o,n.ctx=s,r&1&&l!==(l=D(s[0]))&&N(l,n)||V(n,s,r)},i(o){t||($(n.block),t=!0)},o(o){for(let r=0;r<3;r+=1){const _=n.blocks[r];w(_)}t=!1},d(o){o&&m(e),n.block.d(o),n.token=null,n=null}}}function Y(s){return{c:a,l:a,m:a,p:a,i:a,o:a,d:a}}function Z(s){let e,l,t,n;const o=[ee,x],r=[];function _(c,u){return c[1]?0:1}return e=_(s),l=r[e]=o[e](s),{c(){l.c(),t=U()},l(c){l.l(c),t=U()},m(c,u){r[e].m(c,u),I(c,t,u),n=!0},p(c,u){let p=e;e=_(c),e===p?r[e].p(c,u):(z(),w(r[p],1,1,()=>{r[p]=null}),G(),l=r[e],l?l.p(c,u):(l=r[e]=o[e](c),l.c()),$(l,1),l.m(t.parentNode,t))},i(c){n||($(l),n=!0)},o(c){w(l),n=!1},d(c){r[e].d(c),c&&m(t)}}}function x(s){let e,l,t,n,o,r,_,c,u,p;l=new W({props:{username:s[0]}});let i={ctx:s,current:null,token:null,hasCatch:!1,pending:le,then:ne,catch:te,value:2,blocks:[,,,]};return N(_=fetch("/api/fetchUserPosts?username="+s[0]).then(L),i),{c(){e=v("main"),j(l.$$.fragment),t=P(),n=v("button"),o=A("Log out"),r=P(),i.block.c(),this.h()},l(h){e=g(h,"MAIN",{class:!0});var f=y(e);B(l.$$.fragment,f),t=E(f),n=g(f,"BUTTON",{class:!0});var k=y(n);o=C(k,"Log out"),k.forEach(m),r=E(f),i.block.l(f),f.forEach(m),this.h()},h(){b(n,"class","svelte-1af0t2o"),b(e,"class","svelte-1af0t2o")},m(h,f){I(h,e,f),F(l,e,null),d(e,t),d(e,n),d(n,o),d(e,r),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,c=!0,u||(p=H(n,"click",oe),u=!0)},p(h,f){s=h;const k={};f&1&&(k.username=s[0]),l.$set(k),i.ctx=s,f&1&&_!==(_=fetch("/api/fetchUserPosts?username="+s[0]).then(L))&&N(_,i)||V(i,s,f)},i(h){c||($(l.$$.fragment,h),$(i.block),c=!0)},o(h){w(l.$$.fragment,h);for(let f=0;f<3;f+=1){const k=i.blocks[f];w(k)}c=!1},d(h){h&&m(e),O(l),i.block.d(),i.token=null,i=null,u=!1,p()}}}function ee(s){let e,l;return{c(){e=v("h1"),l=A("404 User Not Found")},l(t){e=g(t,"H1",{});var n=y(e);l=C(n,"404 User Not Found"),n.forEach(m)},m(t,n){I(t,e,n),d(e,l)},p:a,i:a,o:a,d(t){t&&m(e)}}}function te(s){return{c:a,l:a,m:a,p:a,i:a,o:a,d:a}}function ne(s){let e,l;return e=new J({props:{class:"postList",posts:s[2]}}),{c(){j(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.posts=t[2]),e.$set(o)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){w(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function le(s){return{c:a,l:a,m:a,p:a,i:a,o:a,d:a}}function se(s){return{c:a,l:a,m:a,p:a,i:a,o:a,d:a}}function ae(s){let e,l,t=X(s);return{c(){t&&t.c(),e=U()},l(n){t&&t.l(n),e=U()},m(n,o){t&&t.m(n,o),I(n,e,o),l=!0},p(n,[o]){t.p(n,o)},i(n){l||($(t),l=!0)},o(n){w(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}async function D(s){return(await fetch("/api/usernameCheck?username="+s).then(l=>l.json())).usernameAvailable}function oe(){localStorage.removeItem("CRUDAppUsername"),localStorage.setItem("CRUDAppLoggedIn",!1),window.location.href="/login"}const L=s=>s.json();function re(s,e,l){let{username:t}=e;return s.$$set=n=>{"username"in n&&l(0,t=n.username)},[t]}class ue extends S{constructor(e){super(),q(this,e,re,ae,M,{username:0})}}export{ue as P};
