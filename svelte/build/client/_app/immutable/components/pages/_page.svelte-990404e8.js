import{S as C,i as x,s as E,k as d,q as k,a as P,l as v,m as $,r as j,h as u,c as w,n as h,b,D as m,I as A,J as H,B as i,K as O,e as M,f as g,t as y,L as B,w as I,x as T,y as q,M as J,z as S}from"../../chunks/index-c434c163.js";import{P as L}from"../../chunks/PostList-dac37850.js";function R(l){let e,a,t,s,n,o,r,c,p,U;return{c(){e=d("div"),a=d("h1"),t=k("Create a post"),s=P(),n=d("input"),o=P(),r=d("button"),c=k("Create"),this.h()},l(_){e=v(_,"DIV",{class:!0});var f=$(e);a=v(f,"H1",{class:!0});var D=$(a);t=j(D,"Create a post"),D.forEach(u),s=w(f),n=v(f,"INPUT",{type:!0,placeholder:!0,class:!0}),o=w(f),r=v(f,"BUTTON",{class:!0});var N=$(r);c=j(N,"Create"),N.forEach(u),f.forEach(u),this.h()},h(){h(a,"class","svelte-1qjjp7e"),h(n,"type","text"),h(n,"placeholder","Enter your post"),h(n,"class","svelte-1qjjp7e"),h(r,"class","svelte-1qjjp7e"),h(e,"class","createPosts svelte-1qjjp7e")},m(_,f){b(_,e,f),m(e,a),m(a,t),m(e,s),m(e,n),A(n,l[0]),m(e,o),m(e,r),m(r,c),p||(U=[H(n,"input",l[2]),H(r,"click",l[1])],p=!0)},p(_,[f]){f&1&&n.value!==_[0]&&A(n,_[0])},i,o:i,d(_){_&&u(e),p=!1,O(U)}}}function V(l,e,a){let t;const s=async()=>{if(!t||!localStorage.getItem("CRUDAppUsername")){alert("Invalid");return}await(await fetch("/api/createPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:localStorage.getItem("CRUDAppUsername"),content:t})})).json()&&window.location.reload()};function n(){t=this.value,a(0,t)}return[t,s,n]}class z extends C{constructor(e){super(),x(this,e,V,R,E,{})}}function G(l){let e,a,t,s,n;t=new z({});let o={ctx:l,current:null,token:null,hasCatch:!0,pending:Q,then:F,catch:K,value:0,error:1,blocks:[,,,]};return B(X(),o),{c(){e=d("main"),a=d("div"),I(t.$$.fragment),s=P(),o.block.c(),this.h()},l(r){e=v(r,"MAIN",{class:!0});var c=$(e);a=v(c,"DIV",{class:!0});var p=$(a);T(t.$$.fragment,p),s=w(p),o.block.l(p),p.forEach(u),c.forEach(u),this.h()},h(){h(a,"class","svelte-1xeyx57"),h(e,"class","svelte-1xeyx57")},m(r,c){b(r,e,c),m(e,a),q(t,a,null),m(a,s),o.block.m(a,o.anchor=null),o.mount=()=>a,o.anchor=null,n=!0},p(r,c){l=r,J(o,l,c)},i(r){n||(g(t.$$.fragment,r),g(o.block),n=!0)},o(r){y(t.$$.fragment,r);for(let c=0;c<3;c+=1){const p=o.blocks[c];y(p)}n=!1},d(r){r&&u(e),S(t),o.block.d(),o.token=null,o=null}}}function K(l){let e,a;return{c(){e=d("p"),a=k("There was an error loading the posts")},l(t){e=v(t,"P",{});var s=$(e);a=j(s,"There was an error loading the posts"),s.forEach(u)},m(t,s){b(t,e,s),m(e,a)},p:i,i,o:i,d(t){t&&u(e)}}}function F(l){let e,a;return e=new L({props:{posts:l[0]}}),{c(){I(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,s){q(e,t,s),a=!0},p:i,i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){S(e,t)}}}function Q(l){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function W(l){let e,a,t=G(l);return{c(){t&&t.c(),e=M()},l(s){t&&t.l(s),e=M()},m(s,n){t&&t.m(s,n),b(s,e,n),a=!0},p(s,[n]){t.p(s,n)},i(s){a||(g(t),a=!0)},o(s){y(t),a=!1},d(s){t&&t.d(s),s&&u(e)}}}async function X(){return await fetch("/api/fetchPosts",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json())}class Y extends C{constructor(e){super(),x(this,e,null,W,E,{})}}function Z(l){let e,a,t;return a=new Y({}),{c(){e=d("main"),I(a.$$.fragment),this.h()},l(s){e=v(s,"MAIN",{class:!0});var n=$(e);T(a.$$.fragment,n),n.forEach(u),this.h()},h(){h(e,"class","svelte-dfqhed")},m(s,n){b(s,e,n),q(a,e,null),t=!0},p:i,i(s){t||(g(a.$$.fragment,s),t=!0)},o(s){y(a.$$.fragment,s),t=!1},d(s){s&&u(e),S(a)}}}class ae extends C{constructor(e){super(),x(this,e,null,Z,E,{})}}export{ae as default};
