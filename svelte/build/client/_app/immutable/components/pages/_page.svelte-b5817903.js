import{S as I,i as E,s as T,k as d,q as k,a as P,l as v,m as g,r as w,h as u,c as C,n as _,b as y,D as m,I as q,J as H,B as i,K as M,e as L,f as $,t as b,L as O,w as x,x as S,y as D,M as B,z as N}from"../../chunks/index-020402b1.js";import{P as J}from"../../chunks/PostList-36cae3a1.js";function R(l){let e,s,t,a,n,o,r,c,p,U;return{c(){e=d("div"),s=d("h1"),t=k("Create a post"),a=P(),n=d("input"),o=P(),r=d("button"),c=k("Create"),this.h()},l(h){e=v(h,"DIV",{class:!0});var f=g(e);s=v(f,"H1",{});var j=g(s);t=w(j,"Create a post"),j.forEach(u),a=C(f),n=v(f,"INPUT",{type:!0,placeholder:!0,class:!0}),o=C(f),r=v(f,"BUTTON",{class:!0});var A=g(r);c=w(A,"Create"),A.forEach(u),f.forEach(u),this.h()},h(){_(n,"type","text"),_(n,"placeholder","Enter your post"),_(n,"class","svelte-1s0n6m0"),_(r,"class","svelte-1s0n6m0"),_(e,"class","createPosts svelte-1s0n6m0")},m(h,f){y(h,e,f),m(e,s),m(s,t),m(e,a),m(e,n),q(n,l[0]),m(e,o),m(e,r),m(r,c),p||(U=[H(n,"input",l[2]),H(r,"click",l[1])],p=!0)},p(h,[f]){f&1&&n.value!==h[0]&&q(n,h[0])},i,o:i,d(h){h&&u(e),p=!1,M(U)}}}function V(l,e,s){let t;const a=async()=>{if(!t||!localStorage.getItem("CRUDAppLoggedIn")){alert("Invalid");return}await(await fetch("/api/createPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:localStorage.getItem("CRUDAppUsername"),content:t})})).json()&&window.location.reload()};function n(){t=this.value,s(0,t)}return[t,a,n]}class z extends I{constructor(e){super(),E(this,e,V,R,T,{})}}function G(l){let e,s,t,a,n;t=new z({});let o={ctx:l,current:null,token:null,hasCatch:!0,pending:Q,then:F,catch:K,value:0,error:1,blocks:[,,,]};return O(X(),o),{c(){e=d("main"),s=d("div"),x(t.$$.fragment),a=P(),o.block.c(),this.h()},l(r){e=v(r,"MAIN",{class:!0});var c=g(e);s=v(c,"DIV",{class:!0});var p=g(s);S(t.$$.fragment,p),a=C(p),o.block.l(p),p.forEach(u),c.forEach(u),this.h()},h(){_(s,"class","svelte-1sislso"),_(e,"class","svelte-1sislso")},m(r,c){y(r,e,c),m(e,s),D(t,s,null),m(s,a),o.block.m(s,o.anchor=null),o.mount=()=>s,o.anchor=null,n=!0},p(r,c){l=r,B(o,l,c)},i(r){n||($(t.$$.fragment,r),$(o.block),n=!0)},o(r){b(t.$$.fragment,r);for(let c=0;c<3;c+=1){const p=o.blocks[c];b(p)}n=!1},d(r){r&&u(e),N(t),o.block.d(),o.token=null,o=null}}}function K(l){let e,s;return{c(){e=d("p"),s=k("There was an error loading the posts")},l(t){e=v(t,"P",{});var a=g(e);s=w(a,"There was an error loading the posts"),a.forEach(u)},m(t,a){y(t,e,a),m(e,s)},p:i,i,o:i,d(t){t&&u(e)}}}function F(l){let e,s;return e=new J({props:{posts:l[0]}}),{c(){x(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,a){D(e,t,a),s=!0},p:i,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){b(e.$$.fragment,t),s=!1},d(t){N(e,t)}}}function Q(l){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function W(l){let e,s,t=G(l);return{c(){t&&t.c(),e=L()},l(a){t&&t.l(a),e=L()},m(a,n){t&&t.m(a,n),y(a,e,n),s=!0},p(a,[n]){t.p(a,n)},i(a){s||($(t),s=!0)},o(a){b(t),s=!1},d(a){t&&t.d(a),a&&u(e)}}}async function X(){return await fetch("/api/fetchPosts",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json())}class Y extends I{constructor(e){super(),E(this,e,null,W,T,{})}}function Z(l){let e,s,t;return s=new Y({}),{c(){e=d("main"),x(s.$$.fragment),this.h()},l(a){e=v(a,"MAIN",{class:!0});var n=g(e);S(s.$$.fragment,n),n.forEach(u),this.h()},h(){_(e,"class","svelte-dfqhed")},m(a,n){y(a,e,n),D(s,e,null),t=!0},p:i,i(a){t||($(s.$$.fragment,a),t=!0)},o(a){b(s.$$.fragment,a),t=!1},d(a){a&&u(e),N(s)}}}class se extends I{constructor(e){super(),E(this,e,null,Z,T,{})}}export{se as default};
