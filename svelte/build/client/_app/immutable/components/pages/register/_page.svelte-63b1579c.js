import{S as z,i as B,s as J,k as i,q,a as _,l as c,m as w,r as N,h,c as b,p as L,n as s,b as V,D as a,J as Z,B as R,w as H,x as M,y as G,f as K,t as Q,z as W}from"../../../chunks/index-020402b1.js";function X(S){let t,r,e,f,v,l,u,$,n,U,d,A,y,E,p,x,I,m,C,T,D;return{c(){t=i("div"),r=i("div"),e=i("h1"),f=q("Register"),v=_(),l=i("form"),u=i("input"),$=_(),n=i("input"),U=_(),d=i("input"),A=_(),y=i("input"),E=_(),p=i("button"),x=q("Register"),I=_(),m=i("a"),C=q("Already have an account?"),this.h()},l(P){t=c(P,"DIV",{class:!0});var k=w(t);r=c(k,"DIV",{class:!0});var g=w(r);e=c(g,"H1",{style:!0});var F=w(e);f=N(F,"Register"),F.forEach(h),v=b(g),l=c(g,"FORM",{});var o=w(l);u=c(o,"INPUT",{type:!0,placeholder:!0,key:!0,class:!0}),$=b(o),n=c(o,"INPUT",{type:!0,placeholder:!0,key:!0,class:!0}),U=b(o),d=c(o,"INPUT",{type:!0,placeholder:!0,key:!0,class:!0}),A=b(o),y=c(o,"INPUT",{type:!0,placeholder:!0,class:!0}),E=b(o),p=c(o,"BUTTON",{class:!0});var O=w(p);x=N(O,"Register"),O.forEach(h),o.forEach(h),I=b(g),m=c(g,"A",{href:!0,class:!0});var j=w(m);C=N(j,"Already have an account?"),j.forEach(h),g.forEach(h),k.forEach(h),this.h()},h(){L(e,"color","#FFF"),s(u,"type","text"),s(u,"placeholder","Username"),s(u,"key","username"),s(u,"class","svelte-ei6mdb"),s(n,"type","text"),s(n,"placeholder","Email"),s(n,"key","password"),s(n,"class","svelte-ei6mdb"),s(d,"type","password"),s(d,"placeholder","Password"),s(d,"key","password"),s(d,"class","svelte-ei6mdb"),s(y,"type","password"),s(y,"placeholder","Confirm Password"),s(y,"class","svelte-ei6mdb"),s(p,"class","svelte-ei6mdb"),s(m,"href","/login"),s(m,"class","svelte-ei6mdb"),s(r,"class","register svelte-ei6mdb"),s(t,"class","registerBack svelte-ei6mdb")},m(P,k){V(P,t,k),a(t,r),a(r,e),a(e,f),a(r,v),a(r,l),a(l,u),a(l,$),a(l,n),a(l,U),a(l,d),a(l,A),a(l,y),a(l,E),a(l,p),a(p,x),a(r,I),a(r,m),a(m,C),T||(D=Z(p,"click",S[0]),T=!0)},p:R,i:R,o:R,d(P){P&&h(t),T=!1,D()}}}function Y(S){const t=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);async function r(){const e=document.querySelector("input[placeholder='Username']").value;if(!(await fetch("/api/usernameCheck?username="+e).then(n=>n.json())).usernameAvailable){alert("Username is already taken");return}const v=document.querySelector("input[placeholder='Email']").value;if(!t(v)){alert("Email is not valid");return}const l=document.querySelector("input[placeholder='Password']").value,u=document.querySelector("input[placeholder='Confirm Password']").value;if(l!==u){alert("Passwords do not match");return}(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:v,password:l})}).then(n=>n.json())).success?(alert("Successfully registered"),localStorage.setItem("CRUDAppUsername",e),localStorage.setItem("CRUDAppLoggedIn",!0),window.location.href="/"):alert("Something went wrong")}return[r]}class ee extends z{constructor(t){super(),B(this,t,Y,X,J,{})}}function te(S){let t,r;return t=new ee({}),{c(){H(t.$$.fragment)},l(e){M(t.$$.fragment,e)},m(e,f){G(t,e,f),r=!0},p:R,i(e){r||(K(t.$$.fragment,e),r=!0)},o(e){Q(t.$$.fragment,e),r=!1},d(e){W(t,e)}}}class ae extends z{constructor(t){super(),B(this,t,null,te,J,{})}}export{ae as default};
