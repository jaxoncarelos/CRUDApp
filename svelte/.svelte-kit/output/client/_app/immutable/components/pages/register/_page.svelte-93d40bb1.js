import{S as L,i as V,s as Z,k as f,q as D,a as q,l as _,m as A,r as F,h as k,c as I,p as H,n as a,b as K,D as l,I as y,J as S,B as O,K as M,w as G,x as Q,y as W,f as X,t as Y,z as x}from"../../../chunks/index-c434c163.js";function ee(o){let t,s,e,m,v,r,i,P,u,U,c,E,p,b,d,T,$,w,C,N,j;return{c(){t=f("div"),s=f("div"),e=f("h1"),m=D("Register"),v=q(),r=f("form"),i=f("input"),P=q(),u=f("input"),U=q(),c=f("input"),E=q(),p=f("input"),b=q(),d=f("button"),T=D("Register"),$=q(),w=f("a"),C=D("Already have an account?"),this.h()},l(n){t=_(n,"DIV",{class:!0});var g=A(t);s=_(g,"DIV",{class:!0});var R=A(s);e=_(R,"H1",{style:!0});var z=A(e);m=F(z,"Register"),z.forEach(k),v=I(R),r=_(R,"FORM",{});var h=A(r);i=_(h,"INPUT",{type:!0,placeholder:!0,key:!0,class:!0}),P=I(h),u=_(h,"INPUT",{type:!0,placeholder:!0,key:!0,class:!0}),U=I(h),c=_(h,"INPUT",{type:!0,placeholder:!0,key:!0,class:!0}),E=I(h),p=_(h,"INPUT",{type:!0,placeholder:!0,class:!0}),b=I(h),d=_(h,"BUTTON",{class:!0});var B=A(d);T=F(B,"Register"),B.forEach(k),h.forEach(k),$=I(R),w=_(R,"A",{href:!0,class:!0});var J=A(w);C=F(J,"Already have an account?"),J.forEach(k),R.forEach(k),g.forEach(k),this.h()},h(){H(e,"color","#FFF"),a(i,"type","text"),a(i,"placeholder","Username"),a(i,"key","username"),a(i,"class","svelte-1smq6la"),a(u,"type","text"),a(u,"placeholder","Email"),a(u,"key","password"),a(u,"class","svelte-1smq6la"),a(c,"type","password"),a(c,"placeholder","Password"),a(c,"key","password"),a(c,"class","svelte-1smq6la"),a(p,"type","password"),a(p,"placeholder","Confirm Password"),a(p,"class","svelte-1smq6la"),a(d,"class","svelte-1smq6la"),a(w,"href","/login"),a(w,"class","svelte-1smq6la"),a(s,"class","register svelte-1smq6la"),a(t,"class","registerBack svelte-1smq6la")},m(n,g){K(n,t,g),l(t,s),l(s,e),l(e,m),l(s,v),l(s,r),l(r,i),y(i,o[0]),l(r,P),l(r,u),y(u,o[1]),l(r,U),l(r,c),y(c,o[2]),l(r,E),l(r,p),y(p,o[3]),l(r,b),l(r,d),l(d,T),l(s,$),l(s,w),l(w,C),N||(j=[S(i,"input",o[5]),S(u,"input",o[6]),S(c,"input",o[7]),S(p,"input",o[8]),S(d,"click",o[4])],N=!0)},p(n,[g]){g&1&&i.value!==n[0]&&y(i,n[0]),g&2&&u.value!==n[1]&&y(u,n[1]),g&4&&c.value!==n[2]&&y(c,n[2]),g&8&&p.value!==n[3]&&y(p,n[3])},i:O,o:O,d(n){n&&k(t),N=!1,M(j)}}}function te(o,t,s){let e,m,v,r;const i=p=>String(p).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);async function P(){if(!(await fetch("/api/usernameCheck?username="+e).then(d=>d.json())).usernameAvailable){alert("Username is already taken");return}if(!i(m)){alert("Email is not valid");return}if(v!==r){alert("Passwords do not match");return}(await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:m,password:v})}).then(d=>d.json())).success?(alert("Successfully registered"),localStorage.setItem("CRUDAppUsername",e),localStorage.setItem("CRUDAppLoggedIn",!0),window.location.href="/"):alert("Something went wrong")}function u(){e=this.value,s(0,e)}function U(){m=this.value,s(1,m)}function c(){v=this.value,s(2,v)}function E(){r=this.value,s(3,r)}return[e,m,v,r,P,u,U,c,E]}class se extends L{constructor(t){super(),V(this,t,te,ee,Z,{})}}function ae(o){let t,s;return t=new se({}),{c(){G(t.$$.fragment)},l(e){Q(t.$$.fragment,e)},m(e,m){W(t,e,m),s=!0},p:O,i(e){s||(X(t.$$.fragment,e),s=!0)},o(e){Y(t.$$.fragment,e),s=!1},d(e){x(t,e)}}}class le extends L{constructor(t){super(),V(this,t,null,ae,Z,{})}}export{le as default};
