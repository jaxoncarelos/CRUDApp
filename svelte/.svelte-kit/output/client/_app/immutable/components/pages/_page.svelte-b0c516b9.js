import{S as E,i as T,s as x,k as d,q as k,a as P,l as v,m as $,r as w,h as u,c as C,n as m,b as y,D as h,I as A,J as H,B as i,K as O,e as M,f as g,t as b,L as B,w as j,x as I,y as N,M as J,z as S}from"../../chunks/index-020402b1.js";import{P as L}from"../../chunks/PostList-fcef1b0d.js";function V(l){let e,a,t,s,n,o,r,c,p,D;return{c(){e=d("div"),a=d("h1"),t=k("Create a post"),s=P(),n=d("input"),o=P(),r=d("button"),c=k("Create"),this.h()},l(_){e=v(_,"DIV",{class:!0});var f=$(e);a=v(f,"H1",{});var U=$(a);t=w(U,"Create a post"),U.forEach(u),s=C(f),n=v(f,"INPUT",{maxlength:!0,type:!0,placeholder:!0,class:!0}),o=C(f),r=v(f,"BUTTON",{class:!0});var q=$(r);c=w(q,"Create"),q.forEach(u),f.forEach(u),this.h()},h(){m(n,"maxlength","32"),m(n,"type","text"),m(n,"placeholder","Enter your post"),m(n,"class","svelte-1p7etja"),m(r,"class","svelte-1p7etja"),m(e,"class","createPosts svelte-1p7etja")},m(_,f){y(_,e,f),h(e,a),h(a,t),h(e,s),h(e,n),A(n,l[0]),h(e,o),h(e,r),h(r,c),p||(D=[H(n,"input",l[2]),H(r,"click",l[1])],p=!0)},p(_,[f]){f&1&&n.value!==_[0]&&A(n,_[0])},i,o:i,d(_){_&&u(e),p=!1,O(D)}}}function z(l,e,a){let t;const s=async()=>{if(!t){alert("Please enter a post");return}await(await fetch("/api/createPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:localStorage.getItem("CRUDAppUsername"),content:t})})).json()&&window.location.reload()};function n(){t=this.value,a(0,t)}return[t,s,n]}class G extends E{constructor(e){super(),T(this,e,z,V,x,{})}}function K(l){let e,a,t,s,n;t=new G({});let o={ctx:l,current:null,token:null,hasCatch:!0,pending:Q,then:F,catch:R,value:0,error:1,blocks:[,,,]};return B(X(),o),{c(){e=d("main"),a=d("div"),j(t.$$.fragment),s=P(),o.block.c(),this.h()},l(r){e=v(r,"MAIN",{class:!0});var c=$(e);a=v(c,"DIV",{class:!0});var p=$(a);I(t.$$.fragment,p),s=C(p),o.block.l(p),p.forEach(u),c.forEach(u),this.h()},h(){m(a,"class","svelte-1sislso"),m(e,"class","svelte-1sislso")},m(r,c){y(r,e,c),h(e,a),N(t,a,null),h(a,s),o.block.m(a,o.anchor=null),o.mount=()=>a,o.anchor=null,n=!0},p(r,c){l=r,J(o,l,c)},i(r){n||(g(t.$$.fragment,r),g(o.block),n=!0)},o(r){b(t.$$.fragment,r);for(let c=0;c<3;c+=1){const p=o.blocks[c];b(p)}n=!1},d(r){r&&u(e),S(t),o.block.d(),o.token=null,o=null}}}function R(l){let e,a;return{c(){e=d("p"),a=k("There was an error loading the posts")},l(t){e=v(t,"P",{});var s=$(e);a=w(s,"There was an error loading the posts"),s.forEach(u)},m(t,s){y(t,e,s),h(e,a)},p:i,i,o:i,d(t){t&&u(e)}}}function F(l){let e,a;return e=new L({props:{posts:l[0]}}),{c(){j(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,s){N(e,t,s),a=!0},p:i,i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){S(e,t)}}}function Q(l){return{c:i,l:i,m:i,p:i,i,o:i,d:i}}function W(l){let e,a,t=K(l);return{c(){t&&t.c(),e=M()},l(s){t&&t.l(s),e=M()},m(s,n){t&&t.m(s,n),y(s,e,n),a=!0},p(s,[n]){t.p(s,n)},i(s){a||(g(t),a=!0)},o(s){b(t),a=!1},d(s){t&&t.d(s),s&&u(e)}}}async function X(){return await fetch("/api/fetchPosts",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json())}class Y extends E{constructor(e){super(),T(this,e,null,W,x,{})}}function Z(l){let e,a,t;return a=new Y({}),{c(){e=d("main"),j(a.$$.fragment),this.h()},l(s){e=v(s,"MAIN",{class:!0});var n=$(e);I(a.$$.fragment,n),n.forEach(u),this.h()},h(){m(e,"class","svelte-dfqhed")},m(s,n){y(s,e,n),N(a,e,null),t=!0},p:i,i(s){t||(g(a.$$.fragment,s),t=!0)},o(s){b(a.$$.fragment,s),t=!1},d(s){s&&u(e),S(a)}}}class ae extends E{constructor(e){super(),T(this,e,null,Z,x,{})}}export{ae as default};
