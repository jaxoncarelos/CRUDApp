import{S as A,i as J,s as R,k as b,q as w,a as U,l as g,m as k,r as T,h as _,c as z,n as v,b as m,D as d,J as D,u as N,B as y,K as X,N as B,g as q,t as E,d as V,f as I,e as S,O as K,w as Y,x as F,y as G,z as Q,P as W}from"./index-c434c163.js";function H(r){let e,n,s,l,o,i,a;return{c(){e=b("button"),n=w("X"),s=U(),l=b("button"),o=w("🔧"),this.h()},l(t){e=g(t,"BUTTON",{class:!0});var c=k(e);n=T(c,"X"),c.forEach(_),s=z(t),l=g(t,"BUTTON",{class:!0});var u=k(l);o=T(u,"🔧"),u.forEach(_),this.h()},h(){v(e,"class","svelte-10euw6z"),v(l,"class","editButton svelte-10euw6z")},m(t,c){m(t,e,c),d(e,n),m(t,s,c),m(t,l,c),d(l,o),r[6](l),i||(a=[D(e,"click",r[3]),D(l,"click",r[4])],i=!0)},p:y,d(t){t&&_(e),t&&_(s),t&&_(l),r[6](null),i=!1,X(a)}}}function Z(r){let e,n,s=r[0].username+"",l,o,i,a=r[0].content+"",t,c,u=r[0].username==localStorage.getItem("CRUDAppUsername"),P,O,f=u&&H(r);return{c(){e=b("div"),n=b("h1"),l=w(s),o=U(),i=b("p"),t=w(a),c=U(),f&&f.c(),this.h()},l(h){e=g(h,"DIV",{class:!0});var p=k(e);n=g(p,"H1",{class:!0});var C=k(n);l=T(C,s),C.forEach(_),o=z(p),i=g(p,"P",{class:!0});var L=k(i);t=T(L,a),L.forEach(_),c=z(p),f&&f.l(p),p.forEach(_),this.h()},h(){v(n,"class","username svelte-10euw6z"),v(i,"class","content svelte-10euw6z"),v(e,"class","post svelte-10euw6z")},m(h,p){m(h,e,p),d(e,n),d(n,l),d(e,o),d(e,i),d(i,t),r[5](i),d(e,c),f&&f.m(e,null),P||(O=D(i,"focus",$),P=!0)},p(h,[p]){p&1&&s!==(s=h[0].username+"")&&N(l,s),p&1&&a!==(a=h[0].content+"")&&N(t,a),p&1&&(u=h[0].username==localStorage.getItem("CRUDAppUsername")),u?f?f.p(h,p):(f=H(h),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i:y,o:y,d(h){h&&_(e),r[5](null),f&&f.d(),P=!1,O()}}}const $=()=>{globalThis.value=globalThis.value};function x(r,e,n){let{post:s}=e,l,o;function i(){if(s.username!=localStorage.getItem("CRUDAppUsername")){alert("You can't delete this post");return}fetch("/api/deletePost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:s.postId})}),window.location.reload()}function a(){n(1,l.contentEditable=!0,l),l.focus(),n(2,o.innerHTML="✔️",o),n(2,o.onclick=async()=>{n(1,l.contentEditable=!1,l),n(2,o.innerHTML="🔧",o),await(await fetch("/api/editPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:s.postId,content:l.innerHTML})})).json()&&window.location.reload()},o)}function t(u){B[u?"unshift":"push"](()=>{l=u,n(1,l)})}function c(u){B[u?"unshift":"push"](()=>{o=u,n(2,o)})}return r.$$set=u=>{"post"in u&&n(0,s=u.post)},[s,l,o,i,a,t,c]}class ee extends A{constructor(e){super(),J(this,e,x,Z,R,{post:0})}}function M(r,e,n){const s=r.slice();return s[1]=e[n],s}function te(r){let e=[],n=new Map,s,l,o=r[0];const i=a=>a[1].postId;for(let a=0;a<o.length;a+=1){let t=M(r,o,a),c=i(t);n.set(c,e[a]=j(c,t))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();s=S()},l(a){for(let t=0;t<e.length;t+=1)e[t].l(a);s=S()},m(a,t){for(let c=0;c<e.length;c+=1)e[c].m(a,t);m(a,s,t),l=!0},p(a,t){t&1&&(o=a[0],q(),e=K(e,t,i,1,a,o,n,s.parentNode,W,j,s,M),V())},i(a){if(!l){for(let t=0;t<o.length;t+=1)I(e[t]);l=!0}},o(a){for(let t=0;t<e.length;t+=1)E(e[t]);l=!1},d(a){for(let t=0;t<e.length;t+=1)e[t].d(a);a&&_(s)}}}function se(r){let e,n;return{c(){e=b("p"),n=w("There are no posts yet")},l(s){e=g(s,"P",{});var l=k(e);n=T(l,"There are no posts yet"),l.forEach(_)},m(s,l){m(s,e,l),d(e,n)},p:y,i:y,o:y,d(s){s&&_(e)}}}function j(r,e){let n,s,l;return s=new ee({props:{post:e[1]}}),{key:r,first:null,c(){n=S(),Y(s.$$.fragment),this.h()},l(o){n=S(),F(s.$$.fragment,o),this.h()},h(){this.first=n},m(o,i){m(o,n,i),G(s,o,i),l=!0},p(o,i){e=o;const a={};i&1&&(a.post=e[1]),s.$set(a)},i(o){l||(I(s.$$.fragment,o),l=!0)},o(o){E(s.$$.fragment,o),l=!1},d(o){o&&_(n),Q(s,o)}}}function ne(r){let e,n,s,l;const o=[se,te],i=[];function a(t,c){return t[0]?1:0}return n=a(r),s=i[n]=o[n](r),{c(){e=b("div"),s.c(),this.h()},l(t){e=g(t,"DIV",{class:!0});var c=k(e);s.l(c),c.forEach(_),this.h()},h(){v(e,"class","postList svelte-wwz3ei")},m(t,c){m(t,e,c),i[n].m(e,null),l=!0},p(t,[c]){let u=n;n=a(t),n===u?i[n].p(t,c):(q(),E(i[u],1,1,()=>{i[u]=null}),V(),s=i[n],s?s.p(t,c):(s=i[n]=o[n](t),s.c()),I(s,1),s.m(e,null))},i(t){l||(I(s),l=!0)},o(t){E(s),l=!1},d(t){t&&_(e),i[n].d()}}}function le(r,e,n){let{posts:s}=e;return r.$$set=l=>{"posts"in l&&n(0,s=l.posts)},[s]}class ae extends A{constructor(e){super(),J(this,e,le,ne,R,{posts:0})}}export{ae as P};
